---
name: Add screenshot caption optimizer and CPP strategy to metadata optimizer
status: completed
created: 2026-02-13T23:38:00Z
updated: 2026-02-13T23:47:04Z
github: https://github.com/abc-elearning/aso-agents/issues/6
depends_on: [5]
parallel: false
conflicts_with: []
---

# Task: Add screenshot caption optimizer and CPP strategy to metadata optimizer

## Description
Extend `metadata_optimizer.py` with screenshot caption generation and Custom Product Page (CPP) strategy. Screenshot captions are now indexed by Apple for keyword ranking (June 2025 change), so captions must use complementary keywords not already in title/subtitle/keyword field. CPP support generates metadata for up to 70 custom pages with per-page keyword assignments for organic search.

## Acceptance Criteria
- [ ] `generate_screenshot_captions(keywords, existing_metadata)` method added
- [ ] Captions use complementary keywords (automatically excludes keywords already in title/subtitle/keyword field)
- [ ] 5-10 caption recommendations generated per call
- [ ] Each caption reads naturally (no keyword stuffing)
- [ ] Character count guidance for caption legibility provided
- [ ] `generate_cpp_metadata(segments, keywords)` method added
- [ ] Per-CPP metadata includes: title variant, subtitle variant, keyword assignment, screenshot focus
- [ ] CPP count validated â‰¤ 70 (assertion/error if exceeded)
- [ ] Strategy differentiates organic CPPs vs paid CPPs
- [ ] Output format integrates with existing metadata output structure (apple-metadata.md, google-metadata.md)

## Technical Details
- Files affected:
  - `app-store-optimization/metadata_optimizer.py` (581 lines, extend MetadataOptimizer class)
  - `.claude/skills/aso/metadata_optimizer.py` (sync)
- Screenshot caption strategy:
  1. Collect all keywords from title, subtitle, keyword field
  2. Filter input keywords to only those NOT in existing metadata
  3. Generate natural caption phrases incorporating remaining keywords
  4. Validate readability and relevance
- CPP strategy:
  1. Accept user segments (e.g., "beginners", "advanced users", "enterprise")
  2. Map keyword clusters to segments (uses output from Task 5)
  3. Generate tailored title/subtitle for each segment
  4. Assign organic search keywords per CPP
- Apple character limits still apply to CPP metadata (30/30 for title/subtitle)

## Dependencies
- [ ] Task 5 must be complete (CPP strategy uses keyword clusters from semantic clustering)

## Effort Estimate
- Size: M
- Hours: 16-24
- Parallel: false (depends on Task 5 output)

## Definition of Done
- [ ] `python3 metadata_optimizer.py` passes syntax check
- [ ] Caption generation excludes duplicate keywords from existing metadata
- [ ] CPP count validation prevents > 70
- [ ] All metadata respects Apple/Google character limits
- [ ] Both skill copies synced
- [ ] Zero external dependencies maintained
