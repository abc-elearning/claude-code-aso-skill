---
name: Add iTunes review fetching and wire to review analyzer
status: completed
created: 2026-02-13T23:38:00Z
updated: 2026-02-13T23:47:04Z
github: https://github.com/abc-elearning/aso-agents/issues/3
depends_on: [2]
parallel: true
conflicts_with: []
---

# Task: Add iTunes review fetching and wire to review analyzer

## Description
Extend `itunes_api.py` with a `fetch_reviews()` method using the iTunes RSS JSON endpoint. Add rate limiting (20 calls/min). Wire the fetched review data into `review_analyzer.py` by adding a method to accept the RSS JSON format. Test with real app IDs across multiple regions (US, JP, DE).

## Acceptance Criteria
- [ ] `iTunesAPI.fetch_reviews(app_id, pages=10)` method added
- [ ] RSS JSON endpoint: `https://itunes.apple.com/{country}/rss/customerreviews/page={page}/id={app_id}/sortby=mostrecent/json`
- [ ] Pagination support (pages 1-10, ~500 reviews max)
- [ ] Rate limiting: `time.sleep(3)` between pagination calls (20 calls/min)
- [ ] Review JSON parsed into structured dict: {author, rating, title, body, version, date}
- [ ] Error handling for invalid app IDs, unavailable regions, network errors
- [ ] `ReviewAnalyzer` updated with method to accept fetched review format
- [ ] Tested with Todoist (585829637), Headspace (493145008) in US, JP, DE regions
- [ ] Graceful fallback when endpoint unavailable (returns empty list + warning)

## Technical Details
- Files affected:
  - `app-store-optimization/lib/itunes_api.py` (extend iTunesAPI class)
  - `app-store-optimization/review_analyzer.py` (add format adapter method)
  - `.claude/skills/aso/lib/itunes_api.py` (sync)
  - `.claude/skills/aso/review_analyzer.py` (sync)
- RSS JSON response structure: `feed.entry[]` array with `im:rating.label`, `title.label`, `content.label`, `author.name.label`, `im:version.label`
- Use `urllib.request` (already imported in itunes_api.py)
- Use `json` module for parsing (already imported)
- Use `time.sleep()` for rate limiting (standard library)

## Dependencies
- [ ] Task 2 must be complete (agent definitions reference review fetching)

## Effort Estimate
- Size: M
- Hours: 16-24
- Parallel: true (can run alongside Task 5 and 7 after Task 2)

## Definition of Done
- [ ] `python3 itunes_api.py` passes syntax check
- [ ] `python3 review_analyzer.py` passes syntax check
- [ ] Review fetching returns valid data for 3+ regions
- [ ] Both skill copies synced (app-store-optimization/ â†” .claude/skills/aso/)
- [ ] Zero external dependencies maintained
